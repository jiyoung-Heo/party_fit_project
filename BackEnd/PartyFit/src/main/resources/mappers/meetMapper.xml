<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.partyfit.model.dao.MeetDao">
	<select id="selectMeet" parameterType="map">
		select meet_id, title, content, max_headcount, start_time, end_time,
		status, party_id
		from meet
		where party_id = #{partyId} and status = #{status}
		<if test="condition.key != null">
			and ${condition.key} like
			concat('%',#{condition.word},'%')
		</if>
		<if test="condition.orderBy != null">
			order by ${condition.orderBy} ${condition.orderByDir}
		</if>
	</select>
	<insert id="insertMeet" parameterType="Meet">
		insert into meet(title,
		content, max_headcount, start_time, end_time, party_id)
		values(#{title}, #{content}, #{maxHeadcount}, #{startTime}, #{endTime}, #{partyId})
	</insert>
	<select id="selectMyMeet" parameterType="user" resultType="Meet">
		select * from meet where meet_id IN (select DISTINCT meet_id from meet_member where user_id =#{userId});
	</select>
</mapper>